{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\twta8\\\\OneDrive\\\\Desktop\\\\final project\\\\frontend\\\\src\\\\components\\\\Post.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport \"./Post.css\";\nimport img_pro from \"../image/icon.png\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Post = _ref => {\n  _s();\n  let {\n    post\n  } = _ref;\n  const [comments, setComments] = useState([]);\n  const [newComment, setNewComment] = useState(\"\");\n  const loadComments = async () => {\n    const url = `http://127.0.0.1:8000/api/posts/${post.id}/comments`;\n    const headers = {\n      \"Content-Type\": \"application/json\",\n      Authorization: `Bearer ${localStorage.getItem(\"access_token\")}`\n    };\n    try {\n      const response = await axios.get(url, {\n        headers\n      });\n      console.log(response.data);\n      setComments(response.data);\n    } catch (error) {\n      console.error(error);\n    }\n  };\n  useEffect(() => {\n    loadComments();\n  }, []);\n  const handleNewComment = async event => {\n    event.preventDefault();\n    const url = `http://127.0.0.1:8000/api/posts/${post.id}/comments/create`;\n    const data = {\n      content: newComment\n    };\n    const headers = {\n      \"Content-Type\": \"application/json\",\n      Authorization: `Bearer ${localStorage.getItem(\"access_token\")}`\n    };\n    try {\n      const response = await axios.post(url, data, {\n        headers\n      });\n      console.log(response.data);\n      setNewComment(\"\");\n      loadComments(); // reload comments after new comment is added\n    } catch (error) {\n      console.error(error);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"section\", {\n    className: \"post\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"pro-img\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-post\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n        src: img_pro,\n        alt: \"\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"post-content\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: post.title\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: post.content\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"comments-section\",\n      children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n        children: \"Comments\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 9\n      }, this), comments.map(comment => /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          children: comment.content\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 13\n        }, this)\n      }, comment.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 11\n      }, this)), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleNewComment,\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          placeholder: \"Add a comment...\",\n          value: newComment,\n          onChange: event => setNewComment(event.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          children: \"Comment\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 48,\n    columnNumber: 5\n  }, this);\n};\n_s(Post, \"+OVXuOcjEFRN/kXBrT9MF+duWSc=\");\n_c = Post;\nexport default Post;\nvar _c;\n$RefreshReg$(_c, \"Post\");","map":{"version":3,"names":["React","useState","useEffect","axios","img_pro","jsxDEV","_jsxDEV","Post","_ref","_s","post","comments","setComments","newComment","setNewComment","loadComments","url","id","headers","Authorization","localStorage","getItem","response","get","console","log","data","error","handleNewComment","event","preventDefault","content","className","children","fileName","_jsxFileName","lineNumber","columnNumber","src","alt","title","map","comment","onSubmit","type","placeholder","value","onChange","target","_c","$RefreshReg$"],"sources":["C:/Users/twta8/OneDrive/Desktop/final project/frontend/src/components/Post.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport axios from \"axios\";\r\nimport \"./Post.css\";\r\nimport img_pro from \"../image/icon.png\";\r\n\r\nconst Post = ({ post }) => {\r\n  const [comments, setComments] = useState([]);\r\n  const [newComment, setNewComment] = useState(\"\");\r\n\r\n  const loadComments = async () => {\r\n    const url = `http://127.0.0.1:8000/api/posts/${post.id}/comments`;\r\n    const headers = {\r\n      \"Content-Type\": \"application/json\",\r\n      Authorization: `Bearer ${localStorage.getItem(\"access_token\")}`,\r\n    };\r\n    try {\r\n      const response = await axios.get(url, { headers });\r\n      console.log(response.data);\r\n      setComments(response.data);\r\n    } catch (error) {\r\n      console.error(error);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    loadComments();\r\n  }, []);\r\n\r\n  const handleNewComment = async (event) => {\r\n    event.preventDefault();\r\n    const url = `http://127.0.0.1:8000/api/posts/${post.id}/comments/create`;\r\n    const data = { content: newComment };\r\n    const headers = {\r\n      \"Content-Type\": \"application/json\",\r\n      Authorization: `Bearer ${localStorage.getItem(\"access_token\")}`,\r\n    };\r\n    try {\r\n      const response = await axios.post(url, data, { headers });\r\n      console.log(response.data);\r\n      setNewComment(\"\");\r\n      loadComments(); // reload comments after new comment is added\r\n    } catch (error) {\r\n      console.error(error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <section className=\"post\">\r\n      <div className=\"bg\"></div>\r\n      <div className=\"pro-img\">\r\n        <div className=\"bg-post\"></div>\r\n        <img src={img_pro} alt=\"\" />\r\n      </div>\r\n      <div className=\"post-content\">\r\n        <h3>{post.title}</h3>\r\n        <p>{post.content}</p>\r\n      </div>\r\n      <div className=\"comments-section\">\r\n        <h4>Comments</h4>\r\n        {comments.map((comment) => (\r\n          <div key={comment.id}>\r\n            <p>{comment.content}</p>\r\n          </div>\r\n        ))}\r\n        <form onSubmit={handleNewComment}>\r\n          <input\r\n            type=\"text\"\r\n            placeholder=\"Add a comment...\"\r\n            value={newComment}\r\n            onChange={(event) => setNewComment(event.target.value)}\r\n          />\r\n          <button type=\"submit\">Comment</button>\r\n        </form>\r\n      </div>\r\n    </section>\r\n  );\r\n};\r\n\r\nexport default Post;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}